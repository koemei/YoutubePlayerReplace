!function(){function e(){return this.options.token&&""!=this.options.token}function t(){var e=document.body.getElementsByTagName("iframe");for(var t in e)n.call(e[t],this.options)}function n(e){if(!this.nodeName||"IFRAME"!==this.nodeName)return!1;if(src=this.getAttribute("src"),!u(src,e.VALID_YOUTUBE_DOMAINS))return!1;var t=i(src);o.call(this,e,t)}function o(e,t){var n=e.DOMAIN+"/api/search/files/youtube/?youtubeId=%FILE_ID%&token=%TOKEN%";n=n.replace("%TOKEN%",e.token),n=n.replace("%FILE_ID%",t);var o=this,i=new XMLHttpRequest;i.open("GET",encodeURI(n)),i.onload=function(){if(200===i.status){var t=i.responseText;if(!t||""===t)return;t=JSON.parse(t),t._id&&(o.outerHTML=r(e,t._id))}else a("Request failed.  Returned status of "+i.status)},i.send()}function r(e,t){var n='<iframe width="600" height="700" style="border: none;" src="'+e.DOMAIN+'/widget/files/%FILE_ID%?token=%TOKEN%&show-back=false"></iframe>';return n=n.replace("%TOKEN%",e.token),n=n.replace("%FILE_ID%",t)}function i(e){return e.substring(e.indexOf("embed/")+6,e.indexOf("?"))}function u(e,t){for(var n in t){var o=t[n];if(e.indexOf(o)>-1)return!0}return!1}function s(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function a(e){window.console&&window.console.error(e)}this.KoemeiYoutubePlayerReplace=function(){var e={token:null,DOMAIN:"https://koemei.com",VALID_YOUTUBE_DOMAINS:["youtube.com","youtu.be","youtube-nocookie.com"]};arguments[0]&&"object"==typeof arguments[0]&&(this.options=s(e,arguments[0]))},KoemeiYoutubePlayerReplace.prototype.init=function(){return e.call(this)?void t.call(this):(a("Invalid Token"),!1)}}();